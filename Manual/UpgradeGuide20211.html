<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '///gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https:///css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Upgrading to Unity 2021.1 - Unity 手册">
<title>Upgrading to Unity 2021.1 - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2021.2/uploads/Main/upgrade211CodeCoverage.png">
<meta name="description" content="Note: Follow the advice in this section in release order. For example, if you need to upgrade your project from 2018 to 2021, read the 2019 upgrade guides to see if there are any changes that you need to make before you read the 2021 upgrade guides.">
<meta property="og:description" content="Note: Follow the advice in this section in release order. For example, if you need to upgrade your project from 2018 to 2021, read the 2019 upgrade guides to see if there are any changes that you need to make before you read the 2021 upgrade guides.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'UpgradeGuide20211';
      if(!page) page = 'index';
      var version = '2021.2';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2021.2/Manual/UpgradeGuide20211.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2021.2/Manual/UpgradeGuide20211.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2021.2/Manual/UpgradeGuide20211.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2021.2/Manual/UpgradeGuide20211.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2021.2/Manual/UpgradeGuide20211.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2021.2/Manual/UpgradeGuide20211.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2021.2/Manual/UpgradeGuide20211.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2021.2/Documentation/Manual/UpgradeGuide20211.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="///ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.2</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/UpgradeGuide20211.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/UpgradeGuide20211.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/UpgradeGuide20211.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/UpgradeGuide20211.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/UpgradeGuide20211.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/UpgradeGuide20211.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/UpgradeGuide20211.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/UpgradeGuide20211.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UpgradeGuide20211.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UpgradeGuide20211.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UpgradeGuide20211.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UpgradeGuide20211.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UpgradeGuide20211.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UpgradeGuide20211.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UpgradeGuide20211.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UpgradeGuide20211.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UpgradeGuide20211.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UpgradeGuide20211.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UpgradeGuide20211.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/UpgradeGuide20211.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2021.2/Documentation/Manual/UpgradeGuide20211.html">English</a></li>
<li><a data-lang="cn" href="/cn/2021.2/Manual/UpgradeGuide20211.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2021.2/Manual/UpgradeGuide20211.html">日本語</a></li>
<li><a data-lang="es" href="/es/2021.2/Manual/UpgradeGuide20211.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2021.2/Manual/UpgradeGuide20211.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2021.2/Manual/UpgradeGuide20211.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.2</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/UpgradeGuide20211.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/UpgradeGuide20211.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/UpgradeGuide20211.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/UpgradeGuide20211.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/UpgradeGuide20211.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/UpgradeGuide20211.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/UpgradeGuide20211.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/UpgradeGuide20211.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UpgradeGuide20211.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UpgradeGuide20211.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UpgradeGuide20211.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UpgradeGuide20211.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UpgradeGuide20211.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UpgradeGuide20211.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UpgradeGuide20211.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UpgradeGuide20211.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UpgradeGuide20211.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UpgradeGuide20211.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UpgradeGuide20211.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/UpgradeGuide20211.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2021.2</a></li>
<li><a href="UnityOverview.html">在 Unity 中操作</a></li>
<li><a href="UpgradeGuides.html">升级 Unity</a></li>
<li>Upgrading to Unity 2021.1</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuide20212.html"></a></span><div class="tip">Upgrading to Unity 2021.2</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide2020LTS.html"></a></span><div class="tip">升级到 Unity 2020 LTS</div>
</div>
</div></div>
<h1>Upgrading to Unity 2021.1</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p><strong>Note</strong>: Follow the advice in this section in release order. For example, if you need to upgrade your project from 2018 to 2021, read the 2019 upgrade guides to see if there are any changes that you need to make before you read the 2021 upgrade guides.</p>

<p>This page lists changes in the Unity 2021.1 version which might affect existing projects when you upgrade from 2020 LTS to 2021.1.</p>

<h2>Device Simulator</h2>

<p>The <a href="com.unity.device-simulator.html">Device Simulator</a> is now part of the Editor and is accessible from the Game window.
To set up the Device Simulator, add the <code>UnityEngine.Device</code> namespace to the Screen, Application, and SystemInfo classes:
<code>UnityEngine.Device.Screen;</code>
<code>UnityEngine.Device.Application;</code>
<code>UnityEngine.Device.SystemInfo;</code></p>

<p>To switch to <code>UnityEngine.Device</code>, add the following logic to each script you want to use with the simulator:
<code>
using Screen = UnityEngine.Device.Screen;
using Application = UnityEngine.Device.Application;
using SystemInfo = UnityEngine.Device.SystemInfo;
</code>
The new namespace <code>UnityEngine.Device</code> transitions smoothly from Simulator (when in Editor) to actual device API with a runtime build.</p>

<h2>Environment Lighting</h2>

<p>The Editor now automatically bakes the default <a href="skyboxes-using.html">skybox</a> probe and <a href="../ScriptReference/RenderSettings-ambientProbe.html">ambient probe</a> and retains that data until you manually bake the Scene. When you upgrade, Scenes with no ambient light contribution might visually change. To restore the original look of these Scenes, set the Environment lighting <a href="lighting-window.html#EnvironmentSection">intensity multiplier</a> to 0. Alternatively, set the skybox to black, bake the scene, then reset the skybox to your preferred sky color.</p>

<h2>Enable Code Coverage preference</h2>

<p>The user interface for managing Code Coverage has moved from General Preferences to within the <a href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@latest">Code Coverage package</a>.</p>

<figure>
<img src="../uploads/Main/upgrade211CodeCoverage.png" alt="In Unity 2021 the Enable Code Coverage checkbox was moved in the Code Coverage window.">
<figcaption>In Unity 2021 the Enable Code Coverage checkbox was moved in the Code Coverage window.</figcaption>
</figure>

<p>The Code Coverage package is available as a released package via the Package Manager for Unity 2019.3 and above. The latest version is 1.0.0.</p>

<p>You can use one of the following methods to enable code coverage:</p>

<ul>
<li>
<a href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.0/manual/InstallingCodeCoverage.html">Install</a> the Code Coverage package, open the <a href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.0/manual/CodeCoverageWindow.html">Code Coverage window</a> (<strong>Window</strong> &gt; <strong>Analysis</strong> &gt; <strong>Code Coverage</strong>) and select <a href="https://docs.unity3d.com/Packages/com.unity.testtools.codecoverage@1.0/manual/Quickstart.html#4-enable-code-coverage-sub1-minsub"><strong>Enable Code Coverage</strong></a>.</li>
<li>Use the <a href="CommandLineArguments.html">Command line argument</a> <code>-enableCodeCoverage</code> in batchmode.</li>
<li>Use the <a href="../ScriptReference/TestTools.Coverage-enabled.html"><code>Coverage.enabled</code></a> API. Example class:</li>
</ul>

<pre><code>// Create a new C# script called CodeCoverageMenuItem and place it
// under the Editor folder.
// This class creates a toggle menu item under Code Coverage &gt; Enable
// Code Coverage. Use it to enable/disable Code Coverage.

using UnityEditor;
using UnityEngine.TestTools;

class CodeCoverageMenuItem
{
    const string EnableCodeCoverageItemName = "Code Coverage/Enable Code Coverage";

    [MenuItem(EnableCodeCoverageItemName, false)]
    static void EnableCodeCoverage()
    {
        Coverage.enabled = !Coverage.enabled;
    }

    [MenuItem(EnableCodeCoverageItemName, true)]
    static bool EnableCodeCoverageValidate()
    {
        Menu.SetChecked(EnableCodeCoverageItemName, Coverage.enabled);
        return true;
    }
}
</code></pre>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuide20212.html"></a></span><div class="tip">Upgrading to Unity 2021.2</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide2020LTS.html"></a></span><div class="tip">升级到 Unity 2020 LTS</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">版权所有 © 2021 Unity Technologies. Publication 2021.2</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
